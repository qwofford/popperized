BootStrap: library
From: centos:latest

%post
    mkdir -p /opt/bsp_simulator
    rpm --import https://www.centos.org/keys/RPM-GPG-KEY-CentOS-7
    yum -y install centos-release-scl 
    yum -y install wget openmpi-devel gsl-devel libgfortran gmp-devel rh-python36 rh-python36-numpy zsh openssl-devel perf
    yum -y group install "Development Tools"
    ln -s /usr/lib64/openmpi/bin/mpic++ /usr/bin/mpic++
    ln -s /usr/lib64/openmpi/bin/mpirun /usr/bin/mpirun
    wget -P /opt/bsp_prototype/ https://github.com/UNM-CARC/bsp_prototype/archive/deb5d1f8fd061dbea64698e0a6aff0d9fa32c108.zip
    unzip /opt/bsp_prototype/deb5d1f8fd061dbea64698e0a6aff0d9fa32c108.zip -d /opt/
    pushd /opt/bsp_prototype-deb5d1f8fd061dbea64698e0a6aff0d9fa32c108/sprng5
    /usr/bin/zsh ./installSprng
    popd
    pushd /opt/bsp_prototype-deb5d1f8fd061dbea64698e0a6aff0d9fa32c108/
    make
    popd
%runscript
    /opt/rh/rh-python36/root/bin/python3.6 /opt/bsp_prototype-deb5d1f8fd061dbea64698e0a6aff0d9fa32c108/data_gen.py
    /opt/bsp_prototype-deb5d1f8fd061dbea64698e0a6aff0d9fa32c108/gather_new.sh
%labels
    Author QuincyWofford,KeiraHaskins
